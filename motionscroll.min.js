/*!
 * JavaScript scroll animation library
 *
 * Copyright (c) 2023 @louisho5
 * Under the MIT license.
 *
 * @version 0.1.0
 */
"use strict";class MotionScroll{constructor(t={}){this.options=t,this.options="string"==typeof t?{container:t}:t,null==this.options.container&&(this.options.container=".motionscroll"),null==this.options.layer&&(this.options.layer="[data-motionscroll-to],[data-motionscroll-animate]"),null==this.options.ease&&(this.options.ease="linear"),null==this.options.offsetTop&&(this.options.offsetTop=0),null==this.options.offsetBottom&&(this.options.offsetBottom=0),null==this.options.override&&(this.options.override=!1),null==this.options.reverse&&(this.options.reverse=!0),null==this.options.playOnce&&(this.options.playOnce=!1),this.options.override=this.options.override?" !important":"",this.destroy=this.destroy.bind(this),this.init=this.init.bind(this),document.addEventListener("DOMContentLoaded",this.init)}destroy(){var t=this.options.container,o=this.options.layer;document.querySelectorAll(t).forEach((function(t){t.querySelectorAll(o).forEach((function(t){t.classList.forEach((function(o){o.startsWith("_motionscroll-animate-")&&t.classList.remove(o)}))}))})),window.removeEventListener("beforeunload",this.destroy)}init(){var t=this.options.container,o=this.options.layer,n=this.options.ease,e=this.options.offsetTop,i=this.options.offsetBottom,s=this.options.override,r=this.options.reverse,a=this.options.playOnce,l=!1,h=new Set;document.querySelectorAll(t).forEach((function(t){t.querySelectorAll(o).forEach((function(o){var p=o.getAttribute("data-motionscroll-to")||null,c=o.getAttribute("data-motionscroll-animate")||null,d=function(){var t,o,n;do{t=Math.floor(256*Math.random()),o=Math.floor(65536*Math.random()).toString(16).padStart(4,"0"),n="ms"+t.toString(16)+o}while(h.has(n));return h.add(n),n}(),f=`\n            <style>\n            ._motionscroll-animate-${d} {\n              animation: ${d}-animate 1s ${n} infinite${s};\n              animation-play-state: paused${s};\n              animation-delay: calc(var(--${d}-progress) * -1s)${s};\n              animation-iteration-count: 1${s};\n              animation-fill-mode: both${s};\n            }`;c?f+=`\n              @keyframes ${d}-animate {\n                ${c}\n              }\n              </style>`:p&&(f+=`\n              @keyframes ${d}-animate {\n                to {\n                  ${p}\n                }\n              }\n              </style>`),document.head.insertAdjacentHTML("beforeend",f),o.classList.add(`_motionscroll-animate-${d}`);var m=window.innerHeight;window.addEventListener("scroll",(function(){var o=window.innerHeight-(t.offsetTop-window.pageYOffset),n=Math.max(0,Math.min(100,Math.round(o/(m+t.offsetHeight)*100))),s=Math.max(0,Math.min(100,Math.round((o-e)/(m+t.offsetHeight-e-i)*100)));a&&s>=99?(t.style.setProperty(`--${d}-progress`,1),l=!0):a&&!l?t.style.setProperty(`--${d}-progress`,s/100):!a&&r?s>=99?t.style.setProperty(`--${d}-progress`,1):t.style.setProperty(`--${d}-progress`,s/100):a||r||(s>=99?(t.style.setProperty(`--${d}-progress`,1),l=!0):n<=1?(t.style.setProperty(`--${d}-progress`,0),l=!1):l||t.style.setProperty(`--${d}-progress`,s/100))}))}))})),window.dispatchEvent(new Event("scroll")),document.addEventListener("resize",(function(){window.dispatchEvent(new Event("scroll"))}))}}